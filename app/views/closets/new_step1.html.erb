<h1>Step 1: Basic Information</h1>
<%= form_with(model: @closet, url: create_step_path(step: 'step1'), local: true) do |f| %>
  <% if @closet.errors.any? %>
    <div class="alert alert-danger">
      <h4 class="alert-heading"><%= pluralize(@closet.errors.count, "つのエラー") %> 登録できませんでした:</h4>
      <ul>
        <% @closet.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-3">
    <%= f.label :name, t('activerecord.attributes.closet.name'), class: 'form-label' %>
    <%= f.text_field :name, class: 'form-control' %>
  </div>

  <div class="mb-3">
    <%= f.label :image, t('activerecord.attributes.closet.image'), class: 'form-label' %>
    <%= f.file_field :image, id: 'image-upload', class: 'form-control', onchange: 'previewImage(this)' %>
    <% if f.object.image? %>
      <%= image_tag f.object.image.url, class: 'fashion_image mt-2', id: 'preview-image' %>
    <% else %>
      <%= image_tag 'sample.png', class: 'fashion_image mt-2', alt: 'default_icon', id: 'preview-image' %>
    <% end %>
  </div>

  <div class="mb-3">
    <%= f.label :category_id, t('activerecord.attributes.closet.category_id'), class: 'form-label' %>
    <%= f.collection_select :category_id, @categories, :id, :name, {}, { class: 'form-control' } %>
  </div>

  <div class="mb-3">
    <%= f.label :subcategory_id, t('activerecord.attributes.closet.subcategory_id'), class: 'form-label' %>
    <%= f.collection_select :subcategory_id, @subcategories, :id, :name, { include_blank: true }, { class: 'form-control', disabled: true } %>
  </div>

  <div class="mb-3">
    <%= f.submit "Next", class: 'btn btn-primary' %>
  </div>
<% end %>

<%= javascript_include_tag 'closet_form' %>
