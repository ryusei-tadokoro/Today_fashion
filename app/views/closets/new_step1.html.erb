<!-- app/views/closets/new_step1.html.erb -->
<div class="d-flex flex-column vh-100">
  <div class="overlay" style="background-color: rgba(255, 255, 255, 0.8); position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;"></div>
  <main class="flex-grow-1 mb-auto">
    <div class="container-fluid light-blue-container p-5">
      <div class="breadcrumb-container">
        <nav>
          <ul class="breadcrumb">
            <li class="breadcrumb-item active" aria-current="page">基本情報の設定</li>
            <li class="breadcrumb-item">追加情報の設定</li>
          </ul>
        </nav>
      </div>
      <div class="row">
        <div class="col-md-8 offset-md-2">
          <h2 class="mb-4">クローゼットの登録</h2>
          <h3 class="mb-8">基本情報の設定</h3>
          <%= form_with model: @closet, url: create_step_closets_path(step: 'step1'), local: true, html: { class: 'needs-validation', novalidate: true } do |f| %>
            <% if @closet.errors.any? %>
              <div class="alert alert-danger">
                <h4 class="alert-heading"><%= pluralize(@closet.errors.count, "つのエラー") %> 登録できませんでした:</h4>
                <ul>
                  <% @closet.errors.each do |error| %>
                    <li><%= error.full_message %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>

            <div class="form-group">
              <%= f.label :name, t('activerecord.attributes.closet.name'), class: 'form-label', for: 'closet_name' %>
              <%= f.text_field :name, class: 'form-control', id: 'closet_name' %>
      
              <%= f.label :image, t('activerecord.attributes.closet.image'), class: 'form-label' %>
              <%= f.file_field :image, id: 'image-upload', class: 'form-control', onchange: 'previewImage(this)' %>
              <% if f.object.image? %>
                <%= image_tag f.object.image.url, class: 'fashion_image mt-2', id: 'preview-image' %>
              <% else %>
                <%= image_tag 'sample.png', class: 'fashion_image mt-2', alt: 'default_icon', id: 'preview-image' %>
              <% end %>
            </div>

            <div class="form-group">
              <%= f.label :category_id, t('activerecord.attributes.closet.category_id') %>
              <%= f.collection_select :category_id, @categories, :id, :name %>
            </div>

            <div class="form-group">
              <%= f.label :subcategory_id, t('activerecord.attributes.closet.subcategory_id') %>
              <%= f.collection_select :subcategory_id, @subcategories, :id, :name, disabled: true %>
            </div>

            <div>
              <%= f.submit '次へ', class: 'btn btn-primary' %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </main>
</div>

<%= javascript_include_tag 'closet_form' %>
